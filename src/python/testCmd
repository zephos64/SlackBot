import logging
import os

from dotenv import load_dotenv
from slack import WebClient

from slack.signature import SignatureVerifier

from python import BotCommon

logging.basicConfig(level=logging.DEBUG)

if __name__ == "__main__":
    load_dotenv()
    slack_token = os.environ['SLACK_BOT_TOKEN']
    SLACK_SIGNATURE = os.environ['SLACK_SIGNATURE']

    slack_client = WebClient(token=slack_token)
    BotCommon.getConversationsList(slack_client)
    logging.debug("authorized slack client")
    verifier = SignatureVerifier(SLACK_SIGNATURE)

    msg="Zephbot started up"
    resp = BotCommon.sendMessage(slack_client, msg)

    # Sending text
    #msg="Hello world " + str(random.randint(1, 100))
    #resp = BotCommon.sendMessage(slack_client, msg)
    #time.sleep(5)
    #msg="Updated message " + str(random.randint(1, 100))
    #BotCommon.updateMessage(slack_client, msg, resp['ts'])

    # Sending image
    #BotCommon.sendImg(slack_client, '../files/slime3.png')
